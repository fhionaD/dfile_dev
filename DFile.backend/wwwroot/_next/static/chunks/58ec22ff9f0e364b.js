(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83502,e=>{"use strict";var t=e.i(38218),s=e.i(884);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},32537,e=>{"use strict";let t=(0,e.i(55663).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],32537)},51735,e=>{"use strict";let t=(0,e.i(55663).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],51735)},92621,e=>{"use strict";var t=e.i(7662),s=e.i(90105),a=e.i(24972),r=e.i(51305),n=e.i(63370);let i=[{id:"M-2024-001",assetId:"A-101",description:"HVAC System not cooling properly",status:"In Progress",priority:"High",type:"Corrective",dateReported:new Date().toISOString()},{id:"M-2024-002",assetId:"A-102",description:"Monthly Generator Inspection",status:"Scheduled",priority:"Medium",type:"Preventive",frequency:"Monthly",dateReported:new Date(Date.now()-1728e5).toISOString(),startDate:new Date(Date.now()+432e6).toISOString()},{id:"M-2024-003",assetId:"A-105",description:"Projector bulb replacement",status:"Pending",priority:"Low",type:"Corrective",dateReported:new Date(Date.now()-864e5).toISOString()}];function l(){return(0,t.useQuery)({queryKey:["maintenance"],queryFn:async()=>(await new Promise(e=>setTimeout(e,300)),[...i])})}function d(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>{await new Promise(e=>setTimeout(e,300));let t={...e,id:`M-MOCK-${Date.now()}`,dateReported:new Date().toISOString()};return i.push(t),t},onSuccess:()=>{e.invalidateQueries({queryKey:["maintenance"]}),n.toast.success("Maintenance request created (Mock)")},onError:e=>{console.error("Failed to create maintenance record:",e),n.toast.error("Failed to create maintenance request")}})}function c(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>(await new Promise(e=>setTimeout(e,300)),i=i.map(t=>t.id===e.id?e:t),e),onSuccess:()=>{e.invalidateQueries({queryKey:["maintenance"]}),n.toast.success("Maintenance record updated (Mock)")},onError:e=>{console.error("Failed to update record:",e),n.toast.error("Failed to update maintenance record")}})}function o(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:async({id:e,status:t})=>{await new Promise(e=>setTimeout(e,300));let s=i.find(t=>t.id===e);return s&&(s.status=t),s},onSuccess:()=>{e.invalidateQueries({queryKey:["maintenance"]}),n.toast.success("Maintenance status updated")},onError:e=>{console.error("Failed to update status:",e),n.toast.error("Failed to update maintenance status")}})}function u(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:async e=>{await r.default.delete(`/api/maintenance/${e}`)},onSuccess:()=>{e.invalidateQueries({queryKey:["maintenance"]}),n.toast.success("Maintenance record archived")},onError:e=>{console.error("Failed to archive record:",e),n.toast.error("Failed to archive record")}})}e.s(["useAddMaintenanceRecord",()=>d,"useArchiveMaintenanceRecord",()=>u,"useMaintenanceRecords",()=>l,"useUpdateMaintenanceRecord",()=>c,"useUpdateMaintenanceStatus",()=>o])},96655,e=>{"use strict";var t=e.i(38218),s=e.i(72894),a=e.i(94909),r=e.i(71161),n=e.i(59971),i=e.i(39331),l=e.i(73175),d=e.i(29331),c=e.i(23181),o=e.i(82040),u=e.i(96705),m=e.i(79680),x=e.i(70842),h=e.i(13625),g=e.i(92621),p=e.i(76044);function f({onCreateRequest:e,onRecordClick:f}){let{data:j=[],isLoading:b}=(0,g.useMaintenanceRecords)(),{data:v=[],isLoading:y}=(0,p.useAssets)();(0,g.useUpdateMaintenanceStatus)();let N=(0,g.useArchiveMaintenanceRecord)(),[S,w]=(0,s.useState)(!1),[C,D]=(0,s.useState)(""),[M,I]=(0,s.useState)("All"),[k,T]=(0,s.useState)("All"),[A,R]=(0,s.useState)("All Time"),q=e=>{let t=v.find(t=>t.id===e);return t?t.desc:e},P=j.filter(e=>{if(!!e.archived!==S)return!1;let t=C.toLowerCase(),s=q(e.assetId).toLowerCase();if(!(e.id.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.assetId.toLowerCase().includes(t)||s.includes(t))||"All"!==M&&e.status!==M||"All"!==k&&e.priority!==k)return!1;if("All Time"!==A){let t=new Date(e.dateReported),s=new Date;if("This Month"===A&&(t.getMonth()!==s.getMonth()||t.getFullYear()!==s.getFullYear()))return!1;if("Last Month"===A){let e=new Date(s.getFullYear(),s.getMonth()-1,1);if(t.getMonth()!==e.getMonth()||t.getFullYear()!==e.getFullYear())return!1}if("This Year"===A&&t.getFullYear()!==s.getFullYear())return!1}return!0}),F=j.filter(e=>!e.archived).length,L=j.filter(e=>e.archived).length;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Asset Maintenance & Repair"})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center bg-background p-1 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex flex-1 gap-2 w-full sm:w-auto overflow-x-auto pb-2 sm:pb-0 items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm min-w-[200px]",children:[(0,t.jsx)(i.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(c.Input,{placeholder:"Search requests...",value:C,onChange:e=>D(e.target.value),className:"pl-9 h-10 bg-background text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,t.jsxs)(h.Select,{value:M,onValueChange:I,children:[(0,t.jsxs)(h.SelectTrigger,{className:"w-[180px] h-10 bg-background text-sm",children:[(0,t.jsx)(l.Filter,{className:"w-4 h-4 mr-2 text-muted-foreground"}),(0,t.jsx)(h.SelectValue,{placeholder:"Status"})]}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"All",children:"All Status"}),(0,t.jsx)(h.SelectItem,{value:"Pending",children:"Pending"}),(0,t.jsx)(h.SelectItem,{value:"In Progress",children:"In Progress"}),(0,t.jsx)(h.SelectItem,{value:"Completed",children:"Completed"})]})]}),(0,t.jsxs)(h.Select,{value:k,onValueChange:T,children:[(0,t.jsxs)(h.SelectTrigger,{className:"w-[180px] h-10 bg-background text-sm",children:[(0,t.jsx)(l.Filter,{className:"w-4 h-4 mr-2 text-muted-foreground"}),(0,t.jsx)(h.SelectValue,{placeholder:"Priority"})]}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"All",children:"All Priority"}),(0,t.jsx)(h.SelectItem,{value:"High",children:"High"}),(0,t.jsx)(h.SelectItem,{value:"Medium",children:"Medium"}),(0,t.jsx)(h.SelectItem,{value:"Low",children:"Low"})]})]}),(0,t.jsxs)(h.Select,{value:A,onValueChange:R,children:[(0,t.jsxs)(h.SelectTrigger,{className:"w-[180px] h-10 bg-background text-sm",children:[(0,t.jsx)(d.Calendar,{className:"w-4 h-4 mr-2 text-muted-foreground"}),(0,t.jsx)(h.SelectValue,{placeholder:"Date"})]}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"All Time",children:"All Time"}),(0,t.jsx)(h.SelectItem,{value:"This Month",children:"This Month"}),(0,t.jsx)(h.SelectItem,{value:"Last Month",children:"Last Month"}),(0,t.jsx)(h.SelectItem,{value:"This Year",children:"This Year"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-end",children:[(0,t.jsx)(o.Button,{variant:S?"default":"outline",size:"sm",className:"h-10 text-sm",onClick:()=>w(!S),children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.RotateCcw,{size:16,className:"mr-2"}),"Active (",F,")"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Archive,{size:16,className:"mr-2"}),"Archived (",L,")"]})}),(0,t.jsxs)(o.Button,{onClick:e,size:"sm",className:"h-10 text-sm bg-primary text-primary-foreground shadow-sm",children:[(0,t.jsx)(a.Plus,{size:16,className:"mr-2"}),"Create Ticket"]})]})]}),(0,t.jsx)(m.Card,{className:"border-border shadow-sm rounded-xl overflow-hidden",children:(0,t.jsx)(m.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(x.Table,{children:[(0,t.jsx)(x.TableHeader,{children:(0,t.jsxs)(x.TableRow,{className:"bg-muted/50 hover:bg-muted/50",children:[(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-left",children:"Request ID"}),(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-left",children:"Asset"}),(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-left",children:"Description"}),(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-left",children:"Priority"}),(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-left",children:"Date Reported"}),(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-left",children:"Status"}),(0,t.jsx)(x.TableHead,{className:"h-10 px-4 align-middle font-medium text-muted-foreground text-center",children:"Action"})]})}),(0,t.jsx)(x.TableBody,{children:0===P.length?(0,t.jsx)(x.TableRow,{children:(0,t.jsx)(x.TableCell,{colSpan:7,className:"h-32 text-center text-muted-foreground text-sm",children:"No maintenance records match your filters."})}):P.map(e=>(0,t.jsxs)(x.TableRow,{className:"border-border cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>f(e),children:[(0,t.jsx)(x.TableCell,{className:"p-4 align-middle font-mono text-sm font-medium text-foreground text-left",children:e.id}),(0,t.jsx)(x.TableCell,{className:"p-4 align-middle text-sm text-foreground font-medium text-left",children:(0,t.jsxs)("div",{className:"flex flex-col items-start",children:[(0,t.jsx)("span",{children:q(e.assetId)}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground font-mono",children:e.assetId})]})}),(0,t.jsx)(x.TableCell,{className:"p-4 align-middle text-sm text-muted-foreground max-w-[400px] truncate text-left",title:e.description,children:e.description}),(0,t.jsx)(x.TableCell,{className:`p-4 align-middle text-sm text-left ${(e=>{switch(e){case"High":return"text-red-600 font-bold";case"Medium":return"text-amber-600 font-medium";case"Low":return"text-emerald-600";default:return"text-muted-foreground"}})(e.priority)}`,children:e.priority}),(0,t.jsx)(x.TableCell,{className:"p-4 align-middle text-sm text-muted-foreground text-left",children:new Date(e.dateReported).toLocaleDateString()}),(0,t.jsx)(x.TableCell,{className:"p-4 align-middle text-left",children:(0,t.jsx)(u.Badge,{variant:"outline",className:`text-sm border-none rounded-none bg-transparent ${(e=>{switch(e){case"Pending":return"text-amber-700";case"In Progress":return"text-blue-700";case"Completed":return"text-emerald-700";default:return"text-muted-foreground"}})(e.status)}`,children:e.status})}),(0,t.jsx)(x.TableCell,{className:"p-4 align-middle text-center",onClick:e=>e.stopPropagation(),children:(0,t.jsx)("div",{className:"flex items-center justify-center gap-1",children:(0,t.jsx)("button",{onClick:()=>N.mutateAsync(e.id),className:`p-1.5 rounded-md transition-colors ${e.archived?"text-primary hover:bg-primary/10":"text-muted-foreground hover:text-destructive hover:bg-destructive/10"}`,title:e.archived?"Restore":"Archive",children:e.archived?(0,t.jsx)(n.RotateCcw,{size:16}):(0,t.jsx)(r.Archive,{size:16})})})})]},e.id))})]})})})})]})}var j=e.i(81041),b=e.i(51735),v=e.i(2901),y=e.i(70314),N=e.i(71184),S=e.i(48567),w=e.i(75526),C=e.i(83502);function D({open:e,onOpenChange:a,initialData:r,defaultAssetId:n}){let{data:i=[]}=(0,p.useAssets)(),{data:l=[]}=(0,g.useMaintenanceRecords)(),u=(0,g.useAddMaintenanceRecord)(),m=(0,g.useUpdateMaintenanceRecord)(),[x,f]=(0,s.useState)({assetId:"",description:"",priority:"Medium",type:"Corrective",frequency:"One-time",status:"Pending",startDate:"",endDate:"",cost:0});(0,s.useEffect)(()=>{e&&(r?f({assetId:r.assetId||"",description:r.description||"",priority:r.priority||"Medium",type:r.type||"Corrective",frequency:r.frequency||"One-time",status:r.status,startDate:r.startDate||"",endDate:r.endDate||"",cost:r.cost||0}):f({assetId:n||"",description:"",priority:"Medium",type:"Corrective",frequency:"One-time",status:"Pending",startDate:"",endDate:"",cost:0}))},[e,r,n]);let D=async e=>{e.preventDefault(),r?await m.mutateAsync({...r,assetId:x.assetId||r.assetId,description:x.description||"No description provided",priority:x.priority,type:x.type,frequency:x.frequency,startDate:x.startDate,endDate:x.endDate,cost:Number(x.cost)}):x.assetId&&await u.mutateAsync({assetId:x.assetId,description:x.description||"No description provided",priority:x.priority||"Medium",status:"Pending",type:x.type||"Corrective",frequency:x.frequency||"One-time",startDate:x.startDate||new Date().toISOString().split("T")[0],endDate:x.endDate,cost:Number(x.cost),dateReported:new Date().toISOString().split("T")[0]}),a(!1)};return(0,t.jsx)(S.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(S.DialogContent,{className:"max-w-2xl rounded-2xl border-border p-0 overflow-hidden flex flex-col max-h-[90vh]",children:[(0,t.jsx)(S.DialogHeader,{className:"p-6 bg-muted/40 border-b border-border shrink-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-primary/10 rounded-xl text-primary",children:(0,t.jsx)(j.Wrench,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.DialogTitle,{className:"text-lg font-semibold text-foreground",children:r?"Edit Maintenance Record":"New Maintenance Record"}),(0,t.jsx)(S.DialogDescription,{className:"text-muted-foreground text-xs mt-1",children:r?"Update maintenance details and status":"Schedule maintenance or report an issue"})]})]})}),(0,t.jsx)("form",{id:"maintenance-form",onSubmit:D,className:"p-6 space-y-6 flex-1 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(N.Layers,{size:12})," Asset to Maintain"]}),(0,t.jsxs)(h.Select,{value:x.assetId||"",onValueChange:e=>f({...x,assetId:e}),children:[(0,t.jsx)(h.SelectTrigger,{className:"w-full h-10 bg-background px-3 text-sm",children:(0,t.jsx)(h.SelectValue,{placeholder:"Select asset..."})}),(0,t.jsx)(h.SelectContent,{children:i.map(e=>(0,t.jsx)(h.SelectItem,{value:e.id,children:e.desc},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(j.Wrench,{size:12})," Type"]}),(0,t.jsxs)(h.Select,{value:x.type,onValueChange:e=>f({...x,type:e}),children:[(0,t.jsx)(h.SelectTrigger,{className:"w-full h-10 bg-background px-3 text-sm",children:(0,t.jsx)(h.SelectValue,{placeholder:"Select type"})}),(0,t.jsx)(h.SelectContent,{children:["Preventive","Corrective","Upgrade","Inspection"].map(e=>(0,t.jsx)(h.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(b.AlertTriangle,{size:12})," Priority"]}),(0,t.jsxs)(h.Select,{value:x.priority,onValueChange:e=>f({...x,priority:e}),children:[(0,t.jsx)(h.SelectTrigger,{className:"w-full h-10 bg-background px-3 text-sm",children:(0,t.jsx)(h.SelectValue,{placeholder:"Select priority"})}),(0,t.jsx)(h.SelectContent,{children:["Low","Medium","High"].map(e=>(0,t.jsx)(h.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(d.Calendar,{size:12})," Frequency"]}),(0,t.jsxs)(h.Select,{value:x.frequency,onValueChange:e=>f({...x,frequency:e}),children:[(0,t.jsx)(h.SelectTrigger,{className:"w-full h-10 bg-background px-3 text-sm",children:(0,t.jsx)(h.SelectValue,{placeholder:"Select frequency"})}),(0,t.jsx)(h.SelectContent,{children:["One-time","Daily","Weekly","Monthly","Yearly"].map(e=>(0,t.jsx)(h.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(y.DollarSign,{size:12})," Expected Cost"]}),(0,t.jsx)(c.Input,{type:"number",placeholder:"0.00",value:x.cost,onChange:e=>f({...x,cost:Number(e.target.value)}),className:"h-10 bg-background text-sm"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(d.Calendar,{size:12})," Start Date"]}),(0,t.jsx)(c.Input,{type:"date",value:x.startDate,onChange:e=>f({...x,startDate:e.target.value}),className:"h-10 bg-background text-sm"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(d.Calendar,{size:12})," End Date"]}),(0,t.jsx)(c.Input,{type:"date",value:x.endDate,onChange:e=>f({...x,endDate:e.target.value}),className:"h-10 bg-background text-sm"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(w.Label,{className:"text-xs font-medium text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(v.FileText,{size:12})," Description"]}),(0,t.jsx)(C.Textarea,{value:x.description,onChange:e=>f({...x,description:e.target.value}),placeholder:"Describe the issue or plan in detail...",className:"min-h-[100px] bg-background text-sm resize-none"})]})]})}),(0,t.jsxs)(S.DialogFooter,{className:"p-6 bg-muted/40 border-t border-border shrink-0 flex justify-end gap-3 w-full",children:[(0,t.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>a(!1),className:"rounded-xl",children:"Cancel"}),(0,t.jsx)(o.Button,{type:"submit",form:"maintenance-form",className:"rounded-xl bg-primary text-primary-foreground shadow-lg hover:bg-primary/90",children:r?"Save Changes":"Submit Record"})]})]})})}var M=e.i(3650),I=e.i(43919),k=e.i(32537);let T={Pending:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400","In Progress":"bg-sky-100 text-sky-800 dark:bg-sky-900/30 dark:text-sky-400",Completed:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400"},A={Low:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",Medium:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",High:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"};function R({open:e,onOpenChange:s,record:a,onEdit:r,onRequestReplacement:n}){let{data:i=[]}=(0,p.useAssets)();if(!a)return null;let l=i.find(e=>e.id===a.assetId),c=l?l.desc:a.assetId;return(0,t.jsx)(S.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(S.DialogContent,{className:"max-w-lg rounded-2xl border-border p-0 overflow-hidden flex flex-col max-h-[85vh]",children:[(0,t.jsxs)(S.DialogHeader,{className:"p-6 bg-muted/40 border-b border-border shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-12 w-12 rounded-xl bg-primary/10 flex items-center justify-center text-primary",children:(0,t.jsx)(j.Wrench,{size:24})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.DialogTitle,{className:"text-lg font-semibold text-foreground",children:"Maintenance Request"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[(0,t.jsx)(u.Badge,{variant:"secondary",className:"font-mono text-xs",children:a.id}),(0,t.jsx)(u.Badge,{className:`text-xs ${T[a.status]||""}`,children:a.status}),(0,t.jsxs)(u.Badge,{className:`text-xs ${A[a.priority]||""}`,children:[a.priority," Priority"]})]})]})]}),(0,t.jsx)(S.DialogDescription,{className:"sr-only",children:"Maintenance record details"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-5 flex-1 overflow-y-auto",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[(0,t.jsx)(b.AlertTriangle,{size:16,className:"text-primary"})," Issue Description"]}),(0,t.jsx)("p",{className:"text-sm text-foreground bg-muted/10 p-4 rounded-xl border border-border/50 leading-relaxed",children:a.description})]}),(0,t.jsx)(M.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[(0,t.jsx)(I.Package,{size:16,className:"text-primary"})," Asset Information"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm bg-muted/10 p-4 rounded-xl border border-border/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Asset ID"}),(0,t.jsx)(u.Badge,{variant:"secondary",className:"font-mono text-xs mt-1",children:a.assetId})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Asset Name"}),(0,t.jsx)("p",{className:"font-medium",children:c||"â€”"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Type"}),(0,t.jsx)("p",{className:"font-medium",children:a.type})]}),a.frequency&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Frequency"}),(0,t.jsxs)("p",{className:"font-medium flex items-center gap-1.5",children:[(0,t.jsx)(k.RefreshCw,{size:12}),a.frequency]})]})]})]}),(0,t.jsx)(M.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[(0,t.jsx)(d.Calendar,{size:16,className:"text-primary"})," Timeline"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm bg-muted/10 p-4 rounded-xl border border-border/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Date Reported"}),(0,t.jsx)("p",{className:"font-medium",children:a.dateReported})]}),a.startDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start Date"}),(0,t.jsx)("p",{className:"font-medium",children:a.startDate})]}),a.endDate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"End Date"}),(0,t.jsx)("p",{className:"font-medium",children:a.endDate})]}),void 0!==a.cost&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cost"}),(0,t.jsxs)("p",{className:"font-semibold",children:["$",a.cost.toLocaleString()]})]})]})]})]}),(0,t.jsxs)(S.DialogFooter,{className:"p-6 bg-muted/40 border-t border-border flex flex-col sm:flex-row gap-2 sm:justify-between items-center bg-card shrink-0",children:[(0,t.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[r&&(0,t.jsxs)(o.Button,{variant:"outline",onClick:r,className:"rounded-xl flex-1 sm:flex-none",children:[(0,t.jsx)(j.Wrench,{size:16,className:"mr-2"})," Edit Request"]}),n&&(0,t.jsxs)(o.Button,{variant:"destructive",onClick:()=>n(a.assetId),className:"rounded-xl flex-1 sm:flex-none bg-red-100 text-red-700 hover:bg-red-200 border-red-200",children:[(0,t.jsx)(I.Package,{size:16,className:"mr-2"})," Request Replacement"]})]}),(0,t.jsx)(o.Button,{variant:"default",onClick:()=>s(!1),className:"rounded-xl w-full sm:w-auto mt-2 sm:mt-0",children:"Close"})]})]})})}var q=e.i(96543);function P(){let{data:e=[]}=(0,p.useAssets)(),[a,r]=(0,s.useState)(!1),[n,i]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),[c,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(null);return(0,t.jsxs)("div",{className:"space-y-12 pb-10",children:[(0,t.jsx)("section",{children:(0,t.jsx)(f,{onCreateRequest:()=>{o(null),m(null),r(!0)},onRecordClick:e=>{o(e),i(!0)}})}),(0,t.jsx)(D,{open:a,onOpenChange:e=>{r(e),e||(o(null),m(null))},initialData:c,defaultAssetId:u},c?c.id:`create-maintenance-${u}`),(0,t.jsx)(R,{open:n,onOpenChange:i,record:c,onEdit:()=>{i(!1),r(!0)},onRequestReplacement:t=>{let s;i(!1),(s=e.find(e=>e.id===t))&&(h(s),d(!0))}}),(0,t.jsx)(q.AcquisitionModal,{open:l,onOpenChange:e=>{d(e),e||h(null)},replacementAsset:x},x?`acquisition-${x.id}`:"acquisition")]})}e.s(["default",()=>P],96655)}]);